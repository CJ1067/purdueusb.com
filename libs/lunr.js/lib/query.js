lunr.Query=function(r){this.clauses=[],this.allFields=r},lunr.Query.wildcard=new String("*"),lunr.Query.wildcard.NONE=0,lunr.Query.wildcard.LEADING=1,lunr.Query.wildcard.TRAILING=2,lunr.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},lunr.Query.prototype.clause=function(r){return"fields"in r||(r.fields=this.allFields),"boost"in r||(r.boost=1),"usePipeline"in r||(r.usePipeline=!0),"wildcard"in r||(r.wildcard=lunr.Query.wildcard.NONE),r.wildcard&lunr.Query.wildcard.LEADING&&r.term.charAt(0)!=lunr.Query.wildcard&&(r.term="*"+r.term),r.wildcard&lunr.Query.wildcard.TRAILING&&r.term.slice(-1)!=lunr.Query.wildcard&&(r.term=r.term+"*"),"presence"in r||(r.presence=lunr.Query.presence.OPTIONAL),this.clauses.push(r),this},lunr.Query.prototype.isNegated=function(){for(var r=0;r<this.clauses.length;r++)if(this.clauses[r].presence!=lunr.Query.presence.PROHIBITED)return!1;return!0},lunr.Query.prototype.term=function(r,e){if(Array.isArray(r))return r.forEach(function(r){this.term(r,lunr.utils.clone(e))},this),this;var u=e||{};return u.term=r.toString(),this.clause(u),this};