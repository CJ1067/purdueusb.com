/*!
 * lunr.Vector
 * Copyright (C) @YEAR Oliver Nightingale
 */
lunr.Vector=function(t){this._magnitude=0,this.elements=t||[]},lunr.Vector.prototype.positionForIndex=function(t){if(0==this.elements.length)return 0;for(var e=0,n=this.elements.length/2,r=n-e,i=Math.floor(r/2),o=this.elements[2*i];r>1&&(o<t&&(e=i),o>t&&(n=i),o!=t);)r=n-e,i=e+Math.floor(r/2),o=this.elements[2*i];return o==t?2*i:o>t?2*i:o<t?2*(i+1):void 0},lunr.Vector.prototype.insert=function(t,e){this.upsert(t,e,function(){throw"duplicate index"})},lunr.Vector.prototype.upsert=function(t,e,n){this._magnitude=0;var r=this.positionForIndex(t);this.elements[r]==t?this.elements[r+1]=n(this.elements[r+1],e):this.elements.splice(r,0,t,e)},lunr.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t=0,e=this.elements.length,n=1;n<e;n+=2){var r=this.elements[n];t+=r*r}return this._magnitude=Math.sqrt(t)},lunr.Vector.prototype.dot=function(t){for(var e=0,n=this.elements,r=t.elements,i=n.length,o=r.length,s=0,l=0,u=0,h=0;u<i&&h<o;)(s=n[u])<(l=r[h])?u+=2:s>l?h+=2:s==l&&(e+=n[u+1]*r[h+1],u+=2,h+=2);return e},lunr.Vector.prototype.similarity=function(t){return this.dot(t)/this.magnitude()||0},lunr.Vector.prototype.toArray=function(){for(var t=new Array(this.elements.length/2),e=1,n=0;e<this.elements.length;e+=2,n++)t[n]=this.elements[e];return t},lunr.Vector.prototype.toJSON=function(){return this.elements};