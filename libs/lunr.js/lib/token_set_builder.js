lunr.TokenSet.Builder=function(){this.previousWord="",this.root=new lunr.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},lunr.TokenSet.Builder.prototype.insert=function(e){var i,t=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<e.length&&n<this.previousWord.length&&e[n]==this.previousWord[n];n++)t++;this.minimize(t),i=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(n=t;n<e.length;n++){var o=new lunr.TokenSet,r=e[n];i.edges[r]=o,this.uncheckedNodes.push({parent:i,char:r,child:o}),i=o}i.final=!0,this.previousWord=e},lunr.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},lunr.TokenSet.Builder.prototype.minimize=function(e){for(var i=this.uncheckedNodes.length-1;i>=e;i--){var t=this.uncheckedNodes[i],n=t.child.toString();n in this.minimizedNodes?t.parent.edges[t.char]=this.minimizedNodes[n]:(t.child._str=n,this.minimizedNodes[n]=t.child),this.uncheckedNodes.pop()}};